Smaller DBs
(JSONB no datetime & no GIN index)

========================================================
DB reset
sync; service postgresql stop; echo 3 > /proc/sys/vm/drop_caches; service postgresql start
========================================================
========================================================


============================================================================
================================    100k    ================================
============================================================================

================================ 100k cell ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------


<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------

================================ 100k kinds ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------


<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------


================================ 100k sites ================================

<---------------- Cold DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------


<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------


============================================================================
================================    200k    ================================
============================================================================


================================ 200k cell ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------
szoupanos@theospc22:~/development/aiida_experiments/speedup_experiments/1.x_v2/scripts$ source ~/aiidapy2/bin/activate
(aiidapy2) szoupanos@theospc22:~/development/aiida_experiments/speedup_experiments/1.x_v2/scripts$ time verdi -p davide_dj_jsonb_original_seb_copy_m37_copy run q_py_dj_jsonb_aldjemy.py "20160222-225236_200k" "cell"
Querying group: 20160222-225236_200k which size is 200000
Query time (in secs): 15.5165889263, Result size: 13147
Size of serialized reply (in bytes): 5463891

real    1m4.484s
user    0m1.822s
sys     0m0.819s

Db log:
-------
2019-10-03 15:03:43.529 UTC [11687] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'cell' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_200k' AND db_dbnode.attributes ? 'cell'
2019-10-03 15:03:58.684 UTC [11687] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  EXECUTOR STATISTICS
2019-10-03 15:03:58.684 UTC [11687] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy DETAIL:  ! system usage stats:
	!	2.571497 s user, 0.653593 s system, 15.154508 s elapsed
	!	[3.717609 s user, 1.787767 s system total]
	!	362248/0 [1050616/104] filesystem blocks in/out
	!	0/43673 [1/129242] page faults/reclaims, 0 [0] swaps
	!	0 [0] signals rcvd, 0/0 [0/0] messages rcvd/sent
	!	21088/74 [63014/286] voluntary/involuntary context switches
2019-10-03 15:03:58.684 UTC [11687] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'cell' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_200k' AND db_dbnode.attributes ? 'cell'
2019-10-03 15:03:58.684 UTC [11687] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  duration: 15231.011 ms

SQL query size:
---------------

<---------------- Warm DB ---------------->

Verdi console:
--------------
(aiidapy2) szoupanos@theospc22:~/development/aiida_experiments/speedup_experiments/1.x_v2/scripts$ time verdi -p davide_dj_jsonb_original_seb_copy_m37_copy run q_py_dj_jsonb_aldjemy.py "20160222-225236_200k" "cell"
Querying group: 20160222-225236_200k which size is 200000
Query time (in secs): 1.59008693695, Result size: 13147
Size of serialized reply (in bytes): 5463891

real    0m2.822s
user    0m1.623s
sys     0m0.840s

Db log:
-------
2019-10-03 15:06:43.664 UTC [11788] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'cell' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_200k' AND db_dbnode.attributes ? 'cell'
2019-10-03 15:06:44.967 UTC [11788] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  EXECUTOR STATISTICS
2019-10-03 15:06:44.967 UTC [11788] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy DETAIL:  ! system usage stats:
	!	1.282541 s user, 0.020119 s system, 1.302638 s elapsed
	!	[1.614075 s user, 0.039853 s system total]
	!	0/0 [0/96] filesystem blocks in/out
	!	0/3428 [0/9709] page faults/reclaims, 0 [0] swaps
	!	0 [0] signals rcvd, 0/0 [0/0] messages rcvd/sent
	!	0/2 [19/3] voluntary/involuntary context switches
2019-10-03 15:06:44.967 UTC [11788] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'cell' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_200k' AND db_dbnode.attributes ? 'cell'
2019-10-03 15:06:44.967 UTC [11788] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  duration: 1303.509 ms

SQL query size:
---------------


================================ 200k kinds ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------

<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------

================================ 200k sites ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------


Db log:
-------


SQL query size:
---------------

<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------

============================================================================
================================    300k    ================================
============================================================================

================================ 300k cell ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------


Db log:
-------

SQL query size:
---------------

<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------

================================ 300k kinds ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------


Db log:
-------

SQL query size:
---------------

<---------------- Warm DB ---------------->

Verdi console:
--------------

Db log:
-------

SQL query size:
---------------

================================ 300k sites ================================


<---------------- Cold DB ---------------->

Verdi console:
--------------
(aiidapy2) szoupanos@theospc22:~/development/aiida_experiments/speedup_experiments/1.x_v2/scripts$ time verdi -p davide_dj_jsonb_original_seb_copy_m37_copy run q_py_dj_jsonb_aldjemy.py "20160222-225236_300k" "sites"
Querying group: 20160222-225236_300k which size is 300000
Query time (in secs): 30.1745541096, Result size: 19667
Size of serialized reply (in bytes): 210500720

real    1m38.291s
user    0m14.892s
sys     0m2.244s

Db log:
-------
2019-10-03 15:14:55.859 UTC [12060] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'sites' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_300k' AND db_dbnode.attributes ? 'sites'
2019-10-03 15:15:19.833 UTC [12060] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  EXECUTOR STATISTICS
2019-10-03 15:15:19.833 UTC [12060] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy DETAIL:  ! system usage stats:
	!	5.614208 s user, 1.194098 s system, 23.973948 s elapsed
	!	[7.298895 s user, 2.763774 s system total]
	!	539464/0 [1460656/104] filesystem blocks in/out
	!	0/81403 [4/195411] page faults/reclaims, 0 [0] swaps
	!	0 [0] signals rcvd, 0/0 [0/0] messages rcvd/sent
	!	31816/132 [87801/465] voluntary/involuntary context switches
2019-10-03 15:15:19.833 UTC [12060] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'sites' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_300k' AND db_dbnode.attributes ? 'sites'
2019-10-03 15:15:19.833 UTC [12060] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  duration: 24046.902 ms

SQL query size:
---------------

<---------------- Warm DB ---------------->

Verdi console:
--------------
(aiidapy2) szoupanos@theospc22:~/development/aiida_experiments/speedup_experiments/1.x_v2/scripts$ time verdi -p davide_dj_jsonb_original_seb_copy_m37_copy run q_py_dj_jsonb_aldjemy.py "20160222-225236_300k" "sites"
Querying group: 20160222-225236_300k which size is 300000
Query time (in secs): 9.7447309494, Result size: 19667
Size of serialized reply (in bytes): 210500720

real    0m18.369s
user    0m14.618s
sys     0m1.814s

Db log:
-------
2019-10-03 15:16:11.162 UTC [12129] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'sites' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_300k' AND db_dbnode.attributes ? 'sites'
2019-10-03 15:16:14.727 UTC [12129] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  EXECUTOR STATISTICS
2019-10-03 15:16:14.727 UTC [12129] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy DETAIL:  ! system usage stats:
	!	3.329257 s user, 0.235783 s system, 3.565045 s elapsed
	!	[3.820437 s user, 0.239776 s system total]
	!	0/0 [0/96] filesystem blocks in/out
	!	0/20385 [0/28482] page faults/reclaims, 0 [0] swaps
	!	0 [0] signals rcvd, 0/0 [0/0] messages rcvd/sent
	!	1/19 [20/20] voluntary/involuntary context switches
2019-10-03 15:16:14.727 UTC [12129] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy STATEMENT:  SELECT db_dbgroup.id AS db_dbgroup_id, db_dbnode.uuid AS db_dbnode_uuid, db_dbnode.node_type AS db_dbnode_node_type, db_dbnode.process_type AS db_dbnode_process_type, db_dbnode.label AS db_dbnode_label, db_dbnode.description AS db_dbnode_description, db_dbnode.ctime AS db_dbnode_ctime, db_dbnode.mtime AS db_dbnode_mtime, db_dbnode.attributes -> 'sites' AS anon_1
	FROM db_dbgroup JOIN db_dbgroup_dbnodes AS db_dbgroup_dbnodes_1 ON db_dbgroup_dbnodes_1.dbgroup_id = db_dbgroup.id JOIN db_dbnode ON db_dbgroup_dbnodes_1.dbnode_id = db_dbnode.id
	WHERE db_dbgroup.label = '20160222-225236_300k' AND db_dbnode.attributes ? 'sites'
2019-10-03 15:16:14.727 UTC [12129] aiida@aiida_dj_jsonb_original_seb_copy_m37_copy LOG:  duration: 3565.927 ms

SQL query size:
---------------




